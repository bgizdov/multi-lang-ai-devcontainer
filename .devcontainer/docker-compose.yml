version: '3.8'

services:
  devcontainer-work:
    build:
      context: .
      dockerfile: Dockerfile
    
    volumes:
      # Mount the workspace folder
      - ..:/workspaces/${localWorkspaceFolderBasename}:cached
      # Mount additional projects directory
      - ~/projects:/projects
      - ~/myprojects:/myprojects
    
    # Overrides default command so things don't shut down after the process ends.
    command: /bin/sh -c "while sleep 1000; do :; done"

    # No port mappings here - VS Code will handle port forwarding automatically
    # This avoids conflicts with ports already in use on the host

    # Use the default Linux user
    user: vscode
    
    # Set environment variables
    environment:
      - JAVA_HOME=/usr/local/sdkman/candidates/java/current
      - NODE_ENV=development
      - PYTHONUNBUFFERED=1
    
    # Keep container running
    stdin_open: true
    tty: true

